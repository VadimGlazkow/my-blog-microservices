{% extends 'blog/base.html' %}
{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è | –ë–ª–æ–≥{% endblock %}

{% block content %}
  <div class="hero-container">
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –ë–ª–æ–≥!</h1>
          <p>–î–µ–ª–∏—Ç–µ—Å—å –∏—Å—Ç–æ—Ä–∏—è–º–∏, —á–∏—Ç–∞–π—Ç–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ –ø–æ—Å—Ç—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.</p>
        </div>
      </div>
    </section>
  </div>

  <section class="featured-posts">
    <div class="container">
      <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h2>
      <div class="post-grid">
        {% for post in posts %}
          <article class="post-card">
            <img src="{% if post.image %}{{ post.image.url }}{% else %}https://placehold.co/600x400?text=No+Image{% endif %}" alt="{{ post.title }}">
            <div class="post-content">
              <h3>{{ post.title }}</h3>
              <p>{{ post.content|truncatechars:100 }}</p>
              <div class="post-meta">
                <span>–ê–≤—Ç–æ—Ä: {{ post.user.first_name }} {{ post.user.last_name }}</span>
                <span>{{ post.date_create|date:"d.m.Y" }}</span>
              </div>
              <div class="post-actions">
                <div class="rating-buttons">
                  <button class="like-btn {% if request.user in post.likes.all %}active{% endif %}"
                          data-post-id="{{ post.id }}"
                          data-action="{% if request.user in post.likes.all %}unlike{% else %}like{% endif %}"
                          data-is-authenticated="{% if request.user.is_authenticated %}true{% else %}false{% endif %}">
                    <span class="like-icon">üëç</span>
                    <span class="likes-count">{{ post.likes.count }}</span>
                  </button>
                  <button class="dislike-btn {% if request.user in post.dislikes.all %}active{% endif %}"
                          data-post-id="{{ post.id }}"
                          data-action="{% if request.user in post.dislikes.all %}undislike{% else %}dislike{% endif %}"
                          data-is-authenticated="{% if request.user.is_authenticated %}true{% else %}false{% endif %}">
                    <span class="dislike-icon">üëé</span>
                    <span class="dislikes-count">{{ post.dislikes.count }}</span>
                  </button>
                </div>
                <a href="{% url 'post_detail' post.id %}" class="btn">–ß–∏—Ç–∞—Ç—å</a>
              </div>
            </div>
          </article>
        {% empty %}
          <div class="no-posts">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤. <a href="{% url 'create_blog' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</a></p>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
{% endblock %}